<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>ilo.iloãªæ—¥å¹²æ”¯</title>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7388082535405880"
     crossorigin="anonymous"></script>

<!-- iPhoneå‘ã‘PWAã£ã½ã„è¡¨ç¤ºã«ã—ãŸã„å ´åˆã¯å¾Œã§æœ‰åŠ¹åŒ–
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
-->

<style>
  :root{
    --ink:#333;
    --brand:#ff68b6;
    --white:#fff;
  }

  /* ãƒ™ãƒ¼ã‚¹ï¼šãƒ¢ãƒã‚¤ãƒ«å…ˆè¡Œ */
  html, body{
    margin:0;
    padding:0;
    height:100%;
    color:var(--ink);
    -webkit-text-size-adjust:100%; /* iOSã®è‡ªå‹•æ‹¡å¤§ã‚’æŠ‘ãˆã‚‹ */
  }

  body{
    font-family:'Hiragino Kaku Gothic ProN', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans JP", sans-serif;
    text-align:center;

    /* èƒŒæ™¯ï¼ˆiOSã§ã‚«ã‚¯ã¤ãfixedã¯é¿ã‘ã‚‹ï¼‰ */
    background-image:url('iloiloback.jpg');
    background-repeat:no-repeat;
    background-size:cover;
    background-position:center;
  }

  /* ç”»é¢é«˜ã‚’æ­£ã—ãæ‰±ã†ï¼šã‚¢ãƒ‰ãƒ¬ã‚¹ãƒãƒ¼å¤‰å‹•ã«å¼·ã„ */
  .wrap{
    min-height:100svh;              /* Safariå¯¾å¿œã®ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆé«˜ */
    padding:24px 16px calc(24px + env(safe-area-inset-bottom));
    display:flex;
    flex-direction:column;
    justify-content:center;         /* ç¸¦ä¸­å¤® */
    align-items:center;             /* æ¨ªä¸­å¤® */
    gap:18px;
  }

  /* ä¸¸ã‚«ãƒ¼ãƒ‰ï¼šãƒ¢ãƒã‚¤ãƒ«å‘ã‘ã«å¯å¤‰é«˜ã•ï¼†ã‚¿ãƒƒãƒ—ä½™ç™½ç¢ºä¿ */
  .card{
    background:rgba(255,255,255,0.6);
    border-radius:50%;
    width: 240px;
    height: 240px;   /* å¿…è¦ãªã‚‰å¯å¤‰ã«ï¼šauto; ã«ã—ã¦ paddingå¢—ã‚„ã™ */
    box-shadow:0 4px 20px rgba(0,0,0,0.1);
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    padding:28px;
    backdrop-filter: blur(0.5px);   /* iOSã§ã®è¡¨ç¤ºè² è·ã‚’æŠ‘ãˆè»½ã‚ã« */
  }

  h1{
    margin:0 0 2px;
    font-size:32px;
    letter-spacing:.02em;
  }
  .sub{ font-size:16px; }

  /* ãƒ©ãƒ™ãƒ«ã¯ç„¡ã—ï¼ˆä»Šã®è¦‹ãŸç›®ã‚’ç¶­æŒï¼‰ã€‚å…¥ã‚Œã‚‹ãªã‚‰å°ã•ã‚ã« */
  /* label{ font-size:14px; color:#444; margin:10px 0 4px; } */

  input[type="date"]{
    margin-top:12px;
    padding:10px 12px;
    font-size:16px;             /* iOSã§ã®ã‚ºãƒ¼ãƒ é˜²æ­¢ã«16pxä»¥ä¸Š */
    border-radius:10px;
    border:1px solid #ccc;
    background:rgba(255,255,255,.95);
    outline:none;
  }
  input[type="date"]:focus{
    border-color:var(--brand);
    box-shadow:0 0 0 6px rgba(255,104,182,.25);
  }

  .btn{
    margin-top:12px;
    padding:12px 22px;
    font-size:16px;             /* ã‚¿ãƒƒãƒ—ã—ã‚„ã™ã */
    color:#fff;
    background:var(--brand);
    border:none;
    border-radius:999px;
    cursor:pointer;
    min-height:44px;            /* Appleæ¨å¥¨ã‚µã‚¤ã‚º */
    touch-action:manipulation;
  }

  .result{
    margin-top:14px;
    font-size:26px;
    font-weight:700;
  }
  .reading{
    margin-top:0;
    font-size:12px;
    color:#444;
  }

  /* SNSãƒ”ãƒ«ãƒœã‚¿ãƒ³ï¼ˆç™½æ ï¼‰ */
  .share{
    display:flex;
    flex-wrap:wrap;
    justify-content:center;
    gap:10px;
  }
  .share-btn{
    box-sizing:border-box;
    text-decoration:none;
    color:#fff;
    background:transparent;
    border:2px solid #fff;
    border-radius:9999px;
    padding:10px 18px;
    line-height:1;
    font-size:14px;
    font-weight:600;
    display:inline-block;
    text-align:center;
    min-width:108px;     /* 3ã¤ã®å¹…ã‚’ãã‚ãˆã‚‹ */
    white-space:nowrap;
    transition:background .2s ease;
    min-height:44px;     /* ã‚¿ãƒƒãƒ—é¢ç© */
  }
  .share-btn:hover{ background:rgba(255,255,255,.18); }

  /* å¿œæ´ãƒœã‚¿ãƒ³ã¯ä¸‹å´ã«ä½™ç™½ã‚’å¤šã‚ã«ã—ã¦èª¤ã‚¿ãƒƒãƒ—ã‚’é˜²æ­¢ */
  .support-btn{
    text-decoration:none;
    font-size:16px;
    color:#fff;
    background:#ff7f50;
    padding:12px 22px;
    border-radius:999px;
    display:inline-block;
    min-height:44px;
  }
</style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>ilo.ilo</h1>
      <div class="sub">ãªæ—¥å¹²æ”¯</div>

      <input type="date" id="dateInput" />
      <button class="btn" onclick="calculate()">CHECK!</button>

      <div class="result" id="result"></div>
      <div class="reading" id="reading"></div>
    </div>

    <!-- SNSã‚·ã‚§ã‚¢ï¼ˆã‚«ãƒ¼ãƒ‰ã®ä¸‹ï¼‰ -->
    <div class="share">
      <a id="share-x" class="share-btn" href="#" target="_blank" rel="noopener">X</a>
      <a id="share-line" class="share-btn" href="#" target="_blank" rel="noopener">LINE</a>
      <button class="share-btn" type="button" onclick="copyLink()">Instagram</button>
    </div>

    <!-- ä¸€ç•ªä¸‹ï¼šå¿œæ´ãƒœã‚¿ãƒ³ -->
    <a class="support-btn" href="https://ofuse.me/izuiloilo" target="_blank" rel="noopener">izuã‚’å¿œæ´ã™ã‚‹</a>
  </div>

<script>
  const stems = ["ç”²","ä¹™","ä¸™","ä¸","æˆŠ","å·±","åºš","è¾›","å£¬","ç™¸"];
  const stemsReading = ["ãã®ãˆ","ãã®ã¨","ã²ã®ãˆ","ã²ã®ã¨","ã¤ã¡ã®ãˆ","ã¤ã¡ã®ã¨","ã‹ã®ãˆ","ã‹ã®ã¨","ã¿ãšã®ãˆ","ã¿ãšã®ã¨"];
  const branches = ["å­","ä¸‘","å¯…","å¯","è¾°","å·³","åˆ","æœª","ç”³","é…‰","æˆŒ","äº¥"];
  const branchesReading = ["ã­","ã†ã—","ã¨ã‚‰","ã†","ãŸã¤","ã¿","ã†ã¾","ã²ã¤ã˜","ã•ã‚‹","ã¨ã‚Š","ã„ã¬","ã„"];
  const baseDate = new Date(1984, 2, 31);
  const baseIndex = 0;

  function updateShareLinks(stem, branch, stemR, branchR) {
    const url = location.href;
    const text = "ã‚ãªãŸã®ç”Ÿã¾ã‚ŒãŸæ—¥ã®å¹²æ”¯ã‚‚ãƒã‚§ãƒƒã‚¯ ğŸ‘‰ ";
    const encodedURL = encodeURIComponent(url);
    const encodedText = encodeURIComponent(text);

    // Xï¼ˆTwitterï¼‰
    document.getElementById('share-x').href =
      `https://twitter.com/intent/tweet?text=${encodedText}&url=${encodedURL}`;

    // LINEï¼ˆãƒ†ã‚­ã‚¹ãƒˆ+URLï¼‰
    document.getElementById('share-line').href =
      `https://social-plugins.line.me/lineit/share?url=${encodedURL}`;
  }

  function calculate() {
    const input = document.getElementById("dateInput").value;
    if (!input) return;

    const date = new Date(input);
    const diffDays = Math.floor((date - baseDate) / (1000 * 60 * 60 * 24));
    const index = (baseIndex + diffDays % 60 + 60) % 60;

    const stem = stems[index % 10];
    const branch = branches[index % 12];
    const stemR = stemsReading[index % 10];
    const branchR = branchesReading[index % 12];

    document.getElementById("result").innerText = stem + branch;
    document.getElementById("reading").innerText = stemR + branchR;

    updateShareLinks(stem, branch, stemR, branchR);
  }

  function copyLink() {
    navigator.clipboard.writeText(location.href)
      .then(() => alert("ãƒªãƒ³ã‚¯ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼Instagramã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚„ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã«è²¼ã£ã¦ã­ğŸ“²"))
      .catch(err => console.error("ã‚³ãƒ”ãƒ¼ã«å¤±æ•—:", err));
  }

  // è¡¨ç¤ºæ™‚ï¼šä»Šæ—¥ã®æ—¥ä»˜ã‚’ã‚»ãƒƒãƒˆï¼†è‡ªå‹•è¨ˆç®—
  window.onload = () => {
    const t = new Date();
    const yyyy = t.getFullYear();
    const mm   = String(t.getMonth()+1).padStart(2,'0');
    const dd   = String(t.getDate()).padStart(2,'0');
    document.getElementById("dateInput").value = `${yyyy}-${mm}-${dd}`;
    calculate();
  };
</script>
</body>
</html>
